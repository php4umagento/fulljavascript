# TAG=7.0.1 docker-compose up
version: '3'

# https://www.docker.elastic.co/
# https://github.com/elastic/stack-docker/blob/master/docker-compose.yml
services:
  elasticsearch:
    image: docker.elastic.co/elasticsearch/elasticsearch:${TAG}
    ports:
      - "9200:9200"
      - "9300:9300"
    environment:
      - "discovery.type=single-node"

  kibana:
    image: docker.elastic.co/kibana/kibana:${TAG}
    ports:
      - "5601:5601"
    environment:
      - "ELASTICSEARCH_URL=http://elasticsearch:9200"
    depends_on:
      - elasticsearch

  # https://github.com/elastic/logstash/blob/7.0/Dockerfile
  logstash:
    image: docker.elastic.co/logstash/logstash:${TAG}
    ports:
      - "5959:5959"
    links:
      - elasticsearch
    depends_on:
      - elasticsearch
